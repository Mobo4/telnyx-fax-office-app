# Ongoing Task List

## Current Sprint
- [x] Remove upload popup and convert to inline upload on send form.
- [x] Add multi-recipient send support.
- [x] Add address book picker near recipient field.
- [x] Add top 5 frequent contact quick chips.
- [x] Enforce 3000 contact cap.
- [x] Add admin settings gear access pattern.
- [x] Improve dashboard/UI styling.
- [x] Move settings control to floating bottom-left gear.
- [x] Convert address book picker to popup with search + top-5 + OK.
- [x] Add contact-name autocomplete in Send Fax form.
- [x] Add explicit frontend errors for no recipient and invalid phone format.
- [x] Place main Send Fax button below Address Book button.
- [x] Move contact create/import/manage controls into Address Book modal.
- [x] Move Bulk Fax By Tags into Address Book modal as tab.
- [x] Update PRD and continuity docs.
- [x] Auto-normalize recipient phone input (10-digit US -> +1 E.164) and format display.
- [x] Auto-append comma separator after a complete recipient number entry.
- [x] Ensure selected files at submit time are uploaded before fax API call.
- [x] Add selected-file queue UI with per-file remove (`x`) control.
- [x] Enforce send attachment constraints (max 5 files, type checks, and size checks).
- [x] Add send confirmation popup with queue details and history-record verification count.
- [x] Center and polish login view with fax-machine branding.
- [x] Align backend batch upload limit to 5 files.
- [x] Replace silent media URL filtering with explicit backend validation errors.
- [x] Refresh PRD + knowledge documents with reliability specs and known gaps.
- [x] Harden admin-only settings access path (UI + API enforcement check).
- [x] Harden user store compatibility/migration for legacy schemas.
- [x] Add Telnyx request timeout to prevent fax-history hangs.
- [x] Merge active and archive stores for latest-50 history rendering.
- [x] Add Render data-path diagnostics and persistent-disk warning logs.
- [x] Add optional Cloudflare D1 user persistence for free-tier durability.
- [x] Extend D1 persistence to settings/contacts/fax history/bulk job stores.
- [x] Add Telnyx webhook signature verification framework.
- [x] Replace public uploads with signed expiring media delivery endpoint.
- [x] Add login IP throttling and account lockout controls.
- [x] Add background bulk worker interval/startup recovery loop.
- [x] Add D1-backed session store for durable auth sessions.
- [x] Add local file-backed session store fallback when D1 is not enabled.
- [x] Establish stable/commercial major-version branches and rollback tag policy.
- [x] Ship v2 commercial alpha API core on `codex/v2-commercial` (tenant scoping, audit, idempotency, plan limits, billing/mfa admin APIs).
- [x] Remove implicit tenant auto-provisioning from request path; require explicit tenant provisioning.
- [x] Add explicit tenant provisioning admin endpoints (`GET/POST /api/admin/tenants`).
- [x] Isolate tenant config persistence to tenant map and remove cross-tenant/global key bleed.
- [x] Restrict `/api/faxes/:id/refresh` to fax IDs already owned by active tenant.
- [x] Add free-mode billing toggle (`BILLING_MODE=free`) with payment-ready API contracts preserved.

## Next Tasks
- [ ] Execute commercial SaaS program in `/Users/alex/Documents/Projects/Telnyx/docs/TASK-LIST-commercial-saas-hipaa.md`.
- [ ] Add automated tests for `/api/faxes` multi-recipient success/failure mixes.
- [ ] Add tests for contact cap during CSV import.
- [ ] Add localhost runtime banner explaining Telnyx public-HTTPS media requirement.
- [ ] Add per-user timezone setting for cover page timestamps.
- [ ] Add pagination for address book list when contact count approaches 3000.
- [ ] Add Render deployment guide with exact persistent disk + no-sleep plan checklist screenshots.
- [ ] Add webhook signature replay cache (event-id dedupe) for stronger webhook hardening.
- [ ] Add at-rest encryption for uploaded files and automated retention-policy reporting.
